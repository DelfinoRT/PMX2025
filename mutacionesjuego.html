<!doctype html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü¶ú PeriquitosMex - Juego de Mutaciones</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .game-container {
            max-width: 720px;
            margin: 2em auto;
            background: #f9f6ef;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            padding: 2em;
            text-align: center;
        }
        .game-container h2 {
            margin-top: 0;
        }
        .intro-text {
            max-width: 620px;
            margin: 0 auto 1.5em auto;
            font-size: 0.98em;
            color: #4a3512;
        }
        .intro-text b {
            font-weight: 700;
        }
        .module-btn {
            margin: 0.25em;
            padding: 0.7em 1.5em;
            border-radius: 8px;
            border: 1px solid #bfa16a;
            background: #fffbe9;
            color: #6d4c1b;
            font-size: 0.95em;
            cursor: pointer;
            transition: background 0.2s, color 0.2s, transform 0.12s;
        }
        .module-btn:hover {
            background: #ffe9b3;
            transform: translateY(-1px);
        }
        .module-btn.active, .module-btn:active {
            background: #e6d3b3;
            font-weight: bold;
        }
        .trait-card {
            display: inline-block;
            background: #fff;
            border: 2px solid #bfa16a;
            border-radius: 10px;
            margin: 0.5em;
            padding: 1em;
            min-width: 160px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.04);
            text-align: left;
            font-size: 0.92em;
        }
        .trait-card .emoji {
            font-size: 2em;
            text-align: center;
            display: block;
            margin-bottom: 0.3em;
        }
        .puzzle-section {
            margin-top: 1.4em;
            margin-bottom: 1.6em;
            padding: 1em 0 1.5em 0;
            border-top: 1px dashed #d2b981;
        }
        .quiz-btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1em;
            justify-content: center;
            margin-top: 1.1em;
            margin-bottom: 1.1em;
        }
        .quiz-btn, .puzzle-section button {
            background: linear-gradient(90deg, #ffe9b3 0%, #fffbe9 100%) !important;
            border: 2px solid #bfa16a !important;
            border-radius: 18px !important;
            padding: 0.6em 2em !important;
            font-size: 0.95em !important;
            font-family: 'Georgia', 'Arial', serif !important;
            color: #6d4c1b !important;
            font-weight: 700 !important;
            cursor: pointer !important;
            margin: 0.2em !important;
            box-shadow: 0 2px 10px rgba(191,161,106,0.13), 0 1.5px 0 #e6d3b3 inset !important;
            outline: none !important;
            letter-spacing: 0.02em !important;
            transition: background 0.18s, color 0.18s, box-shadow 0.18s, transform 0.12s !important;
            position: relative !important;
            display: inline-block !important;
        }
        .quiz-btn:hover, .quiz-btn:focus,
        .puzzle-section button:hover, .puzzle-section button:focus {
            background: linear-gradient(90deg, #ffe1a1 0%, #ffe9b3 100%) !important;
            color: #4d3200 !important;
            box-shadow: 0 4px 18px rgba(191,161,106,0.22), 0 2px 0 #e6d3b3 inset !important;
            transform: translateY(-2px) scale(1.04) !important;
        }
        .quiz-btn:active,
        .puzzle-section button:active {
            background: linear-gradient(90deg, #ffe9b3 0%, #fffbe9 100%) !important;
            color: #bfa16a !important;
            box-shadow: 0 1px 2px rgba(191,161,106,0.10) !important;
            transform: scale(0.98) !important;
        }
        .feedback {
            margin-top: 0.6em;
            font-weight: bold;
            font-size: 0.9em;
        }
        .success {
            color: #388e3c;
        }
        .fail {
            color: #b71c1c;
        }
        .achievement {
            margin-top: 1em;
            background: #f5f5dc;
            border: 1px solid #bfa16a;
            border-radius: 8px;
            padding: 0.7em;
            color: #6d4c1b;
            font-size: 0.9em;
            text-align: left;
        }
        #progress {
            margin-top: 1em;
            font-size: 0.88em;
            color: #6d4c1b;
        }
        .chapter-label {
            margin-top: 1.2em;
            font-size: 0.9em;
            color: #8a6a34;
        }
        .chapter-label span {
            font-weight: 700;
        }
        .navbar .menu button {
            cursor: pointer;
        }
        @media (max-width: 600px) {
            .game-container {
                margin: 1em;
                padding: 1.2em;
            }
            .module-btn {
                width: 100%;
                box-sizing: border-box;
            }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <a href="index.html">
            <img src="recursos/PMX-Logo.png" alt="Logo PeriquitosMex" class="logo">
        </a>
        <div class="logo-text" id="typing-text"></div>
        <div class="menu">
            <button data-page="/index.html">üê¶ Sobre nosotros</button>
            <button data-page="/familiapmx.html">ü™∂ Familia PMX</button>
            <button data-page="/biblioteca.html">üìñ Biblioteca</button>
            <button data-page="/contacto.html">üíå Contacto</button>
            <button data-page="/mutacionesjuego.html">üß¨ Juego de mutaciones</button>
        </div>
    </div>

    <div class="main-body">
        <div class="game-container" id="game">
            <h2>Juego - Aprende sobre las mutaciones de Periquitos</h2>
            <br>
            <p class="intro-text">
                Eres un criador en entrenamiento en la comunidad <b>PeriquitosMex</b>.  
                Aprende gen√©tica paso a paso con ejemplos reales de colores y mutaciones,  
                responde retos r√°pidos y desbloquea logros como criador.
            </p>

            <div class="chapter-label">
                <span>Cap√≠tulo 1:</span> Tu primer aviario (conceptos b√°sicos)
            </div>
            <div id="modules">
                <div style="margin-bottom:0.2em;"><button class="module-btn" type="button" onclick="startModule(1)" id="mod1">1. ¬øQu√© es la herencia?</button></div>
                <div style="margin-bottom:0.2em;"><button class="module-btn" type="button" onclick="startModule(2)" id="mod2">2. Gen, alelo, genotipo y fenotipo</button></div>
                <div style="margin-bottom:0.8em;"><button class="module-btn" type="button" onclick="startModule(3)" id="mod3">3. Diploid√≠a, homocigosis y heterocigosis</button></div>

                <div class="chapter-label">
                    <span>Cap√≠tulo 2:</span> Colores base y factores
                </div>
                <div style="margin-bottom:0.2em;"><button class="module-btn" type="button" onclick="startModule(4)" id="mod4">4. Dominancia, recesividad e incompleta</button></div>
                <div style="margin-bottom:0.2em;"><button class="module-btn" type="button" onclick="startModule(5)" id="mod5">5. Nomenclatura y ejemplos de genotipos</button></div>
                <div style="margin-bottom:0.8em;"><button class="module-btn" type="button" onclick="startModule(7)" id="mod7">6. Herencia del color y factores</button></div>

                <div class="chapter-label">
                    <span>Cap√≠tulo 3:</span> Ondulaci√≥n y variedades
                </div>
                <div style="margin-bottom:0.2em;"><button class="module-btn" type="button" onclick="startModule(8)" id="mod8">7. Ondulaci√≥n y alas (alas grises, claras, diluidas)</button></div>
                <div style="margin-bottom:0.8em;"><button class="module-btn" type="button" onclick="startModule(9)" id="mod9">8. Variedades dominantes, recesivas y ligadas al sexo</button></div>

                <div class="chapter-label">
                    <span>Cap√≠tulo 4:</span> Sexo y cruzamientos avanzados
                </div>
                <div style="margin-bottom:0.2em;"><button class="module-btn" type="button" onclick="startModule(6)" id="mod6">9. Herencia del sexo</button></div>
                <div style="margin-bottom:0.2em;"><button class="module-btn" type="button" onclick="startModule(10)" id="mod10">10. Ejercicios y cruzamientos avanzados</button></div>
            </div>

            <div id="module-content"></div>
            <div id="progress"></div>
        </div>
    </div>

    <div class="footer">
        <p>ü¶ú Comunidad Ornitol√≥gica de PeriquitosMex A.C. <span id="year"></span> ü¶ú</p>
    </div>

    <script src="script.js"></script>
    <script>
    // --- M√≥dulos y contenido actualizado ---
    const modules = {
        1: {
            title: "M√≥dulo 1: ¬øQu√© es la herencia?",
            content: `
                <br>
                <div style='text-align:left;max-width:560px;margin:0 auto;'>
                    <p><b>Herencia</b> es el proceso por el cual los padres transmiten sus caracter√≠sticas a sus hijos a trav√©s de la informaci√≥n gen√©tica. En los periquitos, esto explica por qu√© los pollos pueden parecerse a sus padres, abuelos o incluso mostrar colores inesperados.</p>
                    <p>Cada caracter√≠stica visible, como el color del cuerpo, el tipo de alas o el patr√≥n de las plumas, se llama <b>car√°cter</b>. Los caracteres est√°n determinados por instrucciones espec√≠ficas en el ADN.</p>
                    <p>Un <b>gen</b> es un fragmento de ADN que contiene la informaci√≥n para un car√°cter espec√≠fico. Por ejemplo, hay un gen que determina el color base del periquito.</p>
                    <p>Para cada gen, existen diferentes versiones llamadas <b>alelos</b>. Los alelos son responsables de la variedad de colores y patrones que vemos en los periquitos. Por ejemplo, un gen puede tener un alelo para el color verde y otro para el azul.</p>
                    <div class="trait-card">
                        <p><b>Ejemplo con periquitos:</b> El color de fondo del cuerpo (verde o azul) es un car√°cter. El gen que controla este car√°cter tiene dos alelos principales: uno para la serie verde (dominante) y otro para la serie azul (recesiva). Si un periquito hereda el alelo verde de uno de sus padres, se ver√° verde, aunque tambi√©n tenga el alelo azul.</p>
                    </div>
                    <p><i>Piensa en los genes como recetas y en los alelos como versiones diferentes de esa receta. As√≠, puedes tener una receta para pastel (gen), pero con diferentes sabores (alelos).</i></p>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta 1:</b> ¬øC√≥mo se llama el fragmento de ADN que contiene la informaci√≥n para un car√°cter?<br>
                    <button onclick="feedback('1a', true)">Gen</button>
                    <button onclick="feedback('1a', false)">Fenotipo</button>
                    <div class="feedback" id="feedback1a"></div>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta 2:</b> ¬øQu√© nombre recibe cada una de las variantes de un gen?<br>
                    <button onclick="feedback('1b', true)">Alelo</button>
                    <button onclick="feedback('1b', false)">Cromosoma</button>
                    <div class="feedback" id="feedback1b"></div>
                </div>
            `
        },
        2: {
            title: "M√≥dulo 2: Gen, alelo y cromosomas",
            content: `
                <br>
                <div style='text-align:left;max-width:560px;margin:0 auto;'>
                    <p>Un <b>gen</b> es una unidad de informaci√≥n en el ADN que determina un car√°cter. Cada gen puede tener varias formas llamadas <b>alelos</b>, que son responsables de las diferencias entre individuos.</p>
                    <p>Los genes se encuentran en los <b>cromosomas</b>, que son estructuras dentro de las c√©lulas. Los periquitos tienen pares de cromosomas: uno de cada padre. As√≠, para cada gen, hay dos copias (una en cada cromosoma del par).</p>
                    <div class="trait-card">
                        <p><b>Ejemplo:</b> El gen del color base tiene un alelo para verde y otro para azul. Si un periquito hereda el alelo verde de su madre y el azul de su padre, tendr√° ambos alelos.</p>
                    </div>
                    <p><i>Piensa en los cromosomas como "libros" de recetas, y los genes como las recetas individuales. Los alelos son versiones diferentes de una misma receta.</i></p>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta 1:</b> ¬øD√≥nde se encuentran los genes dentro de la c√©lula?</br>
                    <button onclick="feedback('2a', true)">En los cromosomas</button>
                    <button onclick="feedback('2a', false)">En la membrana celular</button>
                    <div class="feedback" id="feedback2a"></div>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta 2:</b> ¬øQu√© es un alelo?</br>
                    <button onclick="feedback('2b', true)">Una versi√≥n de un gen</button>
                    <button onclick="feedback('2b', false)">Un tipo de c√©lula</button>
                    <div class="feedback" id="feedback2b"></div>
                </div>
            `
        },
        3: {
            title: "M√≥dulo 3: Genotipo, fenotipo, homocigosis y heterocigosis",
            content: `
                <br>
                <div style='text-align:left;max-width:560px;margin:0 auto;'>
                    <p>El <b>genotipo</b> es la combinaci√≥n de alelos que tiene un individuo para uno o varios caracteres. El <b>fenotipo</b> es la manifestaci√≥n visible de esos genes: el color, el tipo de alas, el patr√≥n, etc.</p>
                    <ul>
                        <li><b>Homocig√≥tico:</b> Cuando ambos alelos para un car√°cter son iguales (por ejemplo, vv para azul o VV para verde). El periquito solo puede transmitir ese alelo a su descendencia.</li>
                        <li><b>Heterocig√≥tico:</b> Cuando los alelos para un car√°cter son diferentes (por ejemplo, Vv: uno verde y uno azul). El periquito puede transmitir cualquiera de los dos alelos a sus pollos.</li>
                    </ul>
                    <div class="trait-card">
                        <p><b>Ejemplo:</b> Un periquito verde con genotipo Vv (verde/azul) se ve verde (fenotipo), pero puede tener pollos azules si se cruza con otro portador de azul. Si ambos padres son Vv, pueden nacer pollos verdes y azules.</p>
                    </div>
                    <p><i>El genotipo es como la "receta interna" y el fenotipo es el "platillo final" que vemos. Homocigosis y heterocigosis explican por qu√© a veces nacen pollos de colores inesperados.</i></p>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta 1:</b> ¬øC√≥mo se llama un individuo con dos alelos diferentes para un car√°cter?<br>
                    <button onclick="feedback('3a', true)">Heterocig√≥tico</button>
                    <button onclick="feedback('3a', false)">Homocig√≥tico</button>
                    <div class="feedback" id="feedback3a"></div>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta 2:</b> ¬øQu√© significa ser homocig√≥tico?</br>
                    <button onclick="feedback('3b', true)">Tener dos alelos iguales para un car√°cter</button>
                    <button onclick="feedback('3b', false)">Tener dos alelos diferentes</button>
                    <div class="feedback" id="feedback3b"></div>
                </div>
            `
        },
                11: {
                    title: "M√≥dulo 11: Mutaciones ligadas al sexo",
                    content: `
                        <br>
                        <div style='text-align:left;max-width:560px;margin:0 auto;'>
                            <p>Algunas mutaciones en periquitos est√°n <b>ligadas al sexo</b>, es decir, el gen responsable se encuentra en el cromosoma sexual. En aves, los machos son XX y las hembras XY (en la notaci√≥n simplificada de este juego).</p>
                            <p>Las mutaciones ligadas al sexo, como <b>Ino</b> (albino/lutino), <b>Canela</b> y <b>Opalino</b>, se expresan de manera diferente en machos y hembras:</p>
                            <ul>
                                <li>Las hembras expresan la mutaci√≥n si tienen el alelo correspondiente en su √∫nico cromosoma X.</li>
                                <li>Los machos pueden ser portadores (tener un solo alelo) o mostrar la mutaci√≥n (si tienen dos alelos).</li>
                            </ul>
                            <div class="trait-card">
                                <p><b>Ejemplo:</b> Un macho portador de Ino (X<sup>ino</sup>X) y una hembra normal (X Y) pueden tener hijas Ino y machos portadores.</p>
                            </div>
                            <p><i>¬°Por eso a veces solo las hijas muestran ciertas mutaciones, mientras los machos solo las portan!</i></p>
                        </div>
                        <div class="puzzle-section">
                            <b>Pregunta:</b> ¬øPor qu√© las hembras expresan m√°s f√°cilmente las mutaciones ligadas al sexo?</br>
                            <button onclick="feedback('11a', true)">Porque solo tienen un cromosoma X</button>
                            <button onclick="feedback('11a', false)">Porque tienen dos cromosomas X</button>
                            <div class="feedback" id="feedback11a"></div>
                        </div>
                    `
                },
                12: {
                    title: "M√≥dulo 12: Mutaciones semidominantes y Spangle",
                    content: `
                        <br>
                        <div style='text-align:left;max-width:560px;margin:0 auto;'>
                            <p>Algunas mutaciones, como <b>Spangle</b>, muestran <b>herencia semidominante</b> o incompleta. Esto significa que el fenotipo de los individuos heterocigotos es diferente al de los homocigotos.</p>
                            <ul>
                                <li><b>Homocigoto Spangle (SpSp):</b> El periquito tiene un patr√≥n muy claro y caracter√≠stico, con menos barrado y m√°s blanco o amarillo.</li>
                                <li><b>Heterocigoto Spangle (Sp+):</b> El patr√≥n Spangle es visible, pero menos intenso. El ave muestra una mezcla entre el patr√≥n normal y el Spangle.</li>
                                <li><b>Normal (++):</b> Sin el gen Spangle, el periquito tiene el patr√≥n cl√°sico.</li>
                            </ul>
                            <div class="trait-card">
                                <p><b>Ejemplo:</b> Si cruzas dos Spangle heterocigotos, puedes obtener pollos normales, Spangle heterocigotos y Spangle homocigotos, cada uno con un aspecto diferente.</p>
                            </div>
                            <p><i>¬°La herencia semidominante a√±ade a√∫n m√°s variedad y belleza a los periquitos!</i></p>
                        </div>
                        <div class="puzzle-section">
                            <b>Pregunta:</b> ¬øQu√© resultado esperas al cruzar dos Spangle heterocigotos?</br>
                            <button onclick="feedback('12a', true)">Pollos normales, Spangle heterocigotos y Spangle homocigotos</button>
                            <button onclick="feedback('12a', false)">Solo Spangle homocigotos</button>
                            <div class="feedback" id="feedback12a"></div>
                        </div>
                    `
                },
        4: {
            title: "M√≥dulo 4: Dominancia, recesividad e incompleta",
            content: `
                <br>
                <div style='text-align:left;max-width:560px;margin:0 auto;'>
                    <p>Los alelos pueden interactuar de diferentes maneras para determinar el fenotipo:</p>
                    <ul>
                        <li><b>Dominantes:</b> Un alelo dominante se expresa en el fenotipo aunque solo est√© presente en una de las dos copias. Por ejemplo, el alelo verde (V) es dominante: basta con tener un solo V para que el periquito se vea verde.</li>
                        <li><b>Recesivos:</b> Un alelo recesivo solo se expresa si est√° presente en ambas copias (homocig√≥tico). Por ejemplo, para que un periquito sea azul (v), debe tener vv.</li>
                        <li><b>Dominancia incompleta o codominancia:</b> A veces, dos alelos diferentes se expresan juntos, produciendo un fenotipo intermedio o una mezcla. Por ejemplo, el factor oscuro (D) muestra dominancia incompleta: Dd oscurece un poco el color, DD lo oscurece mucho.</li>
                    </ul>
                    <div class="trait-card">
                        <p><b>Ejemplo:</b> Si cruzas un periquito verde Vv (dominante) con uno azul vv (recesivo), la mitad de los pollos ser√°n verdes (Vv) y la otra mitad azules (vv). El factor oscuro (D) es otro ejemplo: Dd = color intermedio, DD = color m√°s oscuro.</p>
                    </div>
                    <p><i>Recuerda: dominante = "gana" con una sola copia; recesivo = necesita las dos copias para mostrarse.</i></p>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta:</b> ¬øQu√© tipo de alelo solo se manifiesta si est√° en ambas copias?<br>
                    <button onclick="feedback('4a', true)">Recesivo</button>
                    <button onclick="feedback('4a', false)">Dominante</button>
                    <div class="feedback" id="feedback4a"></div>
                </div>
                <div class="puzzle-section">
                    <b>Reto del aviario:</b> Tienes un macho verde Vv y una hembra azul vv. ¬øQu√© cr√≠as esperas?<br>
                    <button onclick="feedback('4b', false)">100% verdes</button>
                    <button onclick="feedback('4b', false)">100% azules</button>
                    <button onclick="feedback('4b', true)">50% verdes / 50% azules</button>
                    <div class="feedback" id="feedback4b"></div>
                </div>
            `
        },
        5: {
            title: "M√≥dulo 5: Nomenclatura y ejemplos de genotipos",
            content: `
                <br>
                <div style='text-align:left;max-width:560px;margin:0 auto;'>
                    <p>Para describir los <b>genotipos</b> de los periquitos, se usan letras para cada car√°cter gen√©tico. Esto ayuda a los criadores a entender y predecir los colores y patrones de los pollos.</p>
                    <ul>
                        <li><b>L√≠nea de color base:</b> <b>V</b> = verde (dominante), <b>v</b> = azul (recesivo).</li>
                        <li><b>Factor gris:</b> <b>G</b> presente, <b>g</b> ausente (sin gris).</li>
                        <li><b>Factor violeta:</b> <b>Vi</b> presente, <b>vi</b> ausente.</li>
                        <li><b>Factor oscuro:</b> <b>D</b> presente, <b>d</b> ausente.</li>
                        <li><b>Ondulaci√≥n / alas:</b> <b>On</b> (normal), <b>Og</b> (alas grises / greywing), <b>Oc</b> (clearwing), <b>Od</b> (dilute).</li>
                    </ul>
                    <div class="trait-card">
                        <p><b>Ejemplo 1:</b> <b>vv dd</b> = azul cielo (Skyblue normal).<br>
                        <b>Ejemplo 2:</b> <b>vv Dd</b> = cobalto (azul m√°s oscuro, por el factor oscuro).<br>
                        <b>Ejemplo 3:</b> <b>Vv Gg Dd OnOg</b> = periquito verde gris√°ceo, algo oscuro, con alas parcialmente aclaradas.<br>
                        <b>Ejemplo 4:</b> <b>VV GG DD OnOn</b> = periquito verde intenso, con gris y alas normales.</p>
                    </div>
                    <p><i>Leer el genotipo es como leer la "ficha t√©cnica" de cada periquito: puedes saber qu√© colores y factores puede transmitir a sus pollos.</i></p>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta:</b> ¬øQu√© significa "Vv" en un genotipo?</br>
                    <button onclick="feedback('5a', true)">Heterocig√≥tico para la l√≠nea verde (portador de azul)</button>
                    <button onclick="feedback('5a', false)">Homocig√≥tico para la l√≠nea verde</button>
                    <div class="feedback" id="feedback5a"></div>
                </div>
            `
        },
        6: {
            title: "M√≥dulo 9: Herencia del sexo (versi√≥n juego)",
            content: `
                <br>
                <div style='text-align:left;max-width:560px;margin:0 auto;'>
                    <p>En las aves, el sexo se determina de manera diferente que en los mam√≠feros. En la naturaleza, los machos son ZZ y las hembras ZW. Para simplificar en este juego, usamos XX para macho y XY para hembra.</p>
                    <p>El sexo de los pollos depende del cromosoma que aporta la madre. Si aporta X, el pollo ser√° macho (XX); si aporta Y, ser√° hembra (XY).</p>
                    <div class="trait-card">
                        <p><b>Ejemplo:</b> Un macho XX y una hembra XY pueden tener pollos XX (machos) o XY (hembras), aproximadamente en partes iguales. As√≠, en cada nido puedes esperar tanto machos como hembras.</p>
                    </div>
                    <p><i>En la cr√≠a, esto es importante para entender c√≥mo se transmiten algunas mutaciones ligadas al sexo, como Ino o Canela.</i></p>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta:</b> ¬øCu√°l es el genotipo de una hembra periquito en esta versi√≥n simplificada del juego?</br>
                    <button onclick="feedback('6a', true)">XY</button>
                    <button onclick="feedback('6a', false)">XX</button>
                    <div class="feedback" id="feedback6a"></div>
                </div>
            `
        },
        7: {
            title: "M√≥dulo 6: Herencia del color y factores",
            content: `
                <br>
                <div style='text-align:left;max-width:560px;margin:0 auto;'>
                    <p>El color base de los periquitos depende de la serie verde (<b>V</b>, dominante) y la serie azul (<b>v</b>, recesiva). Un periquito con al menos un alelo V se ver√° verde, aunque tambi√©n tenga v.</p>
                    <p>Los <b>factores</b> como el oscuro (<b>D</b>) y el gris (<b>G</b>) modifican la intensidad y el tono del color:</p>
                    <ul>
                        <li>Sin oscuro (<b>dd</b>) en azul: azul cielo (Skyblue).</li>
                        <li><b>Dd</b>: cobalto (azul m√°s intenso).</li>
                        <li><b>DD</b>: malva (azul muy oscuro).</li>
                        <li>Con gris (<b>G-</b>): en verdes da Greygreen (verde gris√°ceo), en azules da Grey (azul gris).</li>
                    </ul>
                    <div class="trait-card">
                        <p><b>Ejemplo:</b><br>
                        <b>vv dd</b> = azul cielo.<br>
                        <b>vv Dd</b> = cobalto.<br>
                        <b>vv DD</b> = malva.<br>
                        <b>V- G-</b> = Greygreen (verde con tono gris√°ceo).</p>
                    </div>
                    <p><i>Al combinar estos factores, puedes obtener una gran variedad de colores en tus pollos. ¬°Experimenta con los cruces y observa los resultados!</i></p>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta:</b> ¬øQu√© color de serie es dominante, verde o azul?</br>
                    <div class="quiz-btn-group">
                        <button class="quiz-btn" onclick="feedback('7a', true)">Verde</button>
                        <button class="quiz-btn" onclick="feedback('7a', false)">Azul</button>
                    </div>
                    <div class="feedback" id="feedback7a"></div>
                </div>
                <div class="puzzle-section">
                    <b>Reto de color:</b> Tienes un macho azul cielo vv dd y una hembra cobalto vv Dd. ¬øQu√© pollos esperas?</br>
                    <button onclick="feedback('7b', false)">Todos azul cielo</button>
                    <button onclick="feedback('7b', false)">Todos malva</button>
                    <button onclick="feedback('7b', true)">50% azul cielo / 50% cobalto</button>
                    <div class="feedback" id="feedback7b"></div>
                </div>
            `
        },
        8: {
            title: "M√≥dulo 7: Ondulaci√≥n y alas (alas grises, claras, diluidas)",
            content: `
                <br>
                <div style='text-align:left;max-width:560px;margin:0 auto;'>
                    <p>La <b>ondulaci√≥n</b> y el tipo de alas determinan el dibujo y la intensidad de las plumas en los periquitos. Hay varias variantes, cada una con su propio efecto visual:</p>
                    <ul>
                        <li><b>On</b> = ondulaci√≥n normal: alas con barrado negro bien definido, el aspecto cl√°sico del periquito.</li>
                        <li><b>Og</b> ‚âà Greywing (alas grises): cuerpo m√°s pastel, alas con barrado gris suave.</li>
                        <li><b>Oc</b> ‚âà Clearwing: cuerpo de color intenso, alas muy claras con poco dibujo.</li>
                        <li><b>Od</b> ‚âà Dilute: cuerpo y alas muy aclarados, casi pastel muy suave.</li>
                    </ul>
                    <p>En este modelo, el orden de dominancia es: On &gt; Og/Oc (codominantes entre s√≠) &gt; Od.</p>
                    <div class="trait-card">
                        <p><b>Ejemplo:</b> Un periquito OnOd se ve casi normal, pero con un ligero aclaramiento en las alas. Un OgOd se parece a un greywing (alas gris√°ceas y cuerpo pastel). Un OcOc se parece a un clearwing muy claro, casi sin dibujo en las alas.</p>
                    </div>
                    <p><i>La ondulaci√≥n y el tipo de alas a√±aden a√∫n m√°s variedad a los periquitos. ¬°Observa bien las alas de tus aves!</i></p>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta:</b> ¬øCu√°l es la ondulaci√≥n m√°s recesiva en este modelo?</br>
                    <button onclick="feedback('8a', true)">Diluida (Od)</button>
                    <button onclick="feedback('8a', false)">Normal (On)</button>
                    <div class="feedback" id="feedback8a"></div>
                </div>
            `
        },
        9: {
            title: "M√≥dulo 8: Variedades dominantes, recesivas y ligadas al sexo",
            content: `
                <br>
                <div style='text-align:left;max-width:560px;margin:0 auto;'>
                    <p>Existen muchas <b>variedades</b> de periquitos, cada una con su propia forma de herencia. Entenderlas te ayudar√° a planear mejor tus cruces:</p>
                    <ul>
                        <li><b>Dominantes:</b> Se manifiestan con solo una copia del alelo. Ejemplo: Spangle, P√≠o dominante (clearflight pied).</li>
                        <li><b>Recesivas:</b> Solo se manifiestan si el periquito tiene dos copias del alelo. Ejemplo: azul, p√≠o recesivo, algunas diluciones.</li>
                        <li><b>Ligadas al sexo:</b> El gen est√° en el cromosoma sexual. Ejemplo: Ino (albino/lutino), Opalino, Canela, Lacewing. Las hembras expresan la mutaci√≥n si la tienen, los machos pueden ser portadores sin mostrarla.</li>
                    </ul>
                    <div class="trait-card">
                        <p><b>Ejemplo:</b> Un macho portador de Ino puede tener hijas Ino si transmite el alelo ligado al sexo. Un rasgo dominante como Spangle se ve con solo una copia del alelo, as√≠ que es m√°s f√°cil de identificar en la descendencia.</p>
                    </div>
                    <p><i>Algunas mutaciones pueden combinarse, creando periquitos √∫nicos. ¬°Explora y experimenta con los cruces!</i></p>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta:</b> ¬øQu√© tipo de car√°cter se considera cuando la mutaci√≥n est√° en el cromosoma sexual y las hembras la expresan si la tienen?</br>
                    <button onclick="feedback('9a', true)">Ligado al sexo</button>
                    <button onclick="feedback('9a', false)">Dominante</button>
                    <div class="feedback" id="feedback9a"></div>
                </div>
                <div class="puzzle-section">
                    <b>Reto ligado al sexo:</b> Un macho portador de Ino y una hembra normal tienen pollos. ¬øQui√©n puede nacer Ino?</br>
                    <button onclick="feedback('9b', true)">Algunas hijas</button>
                    <button onclick="feedback('9b', false)">Solo hijos</button>
                    <button onclick="feedback('9b', false)">Nadie</button>
                    <div class="feedback" id="feedback9b"></div>
                </div>
            `
        },
        10: {
            title: "M√≥dulo 10: Ejercicios y cruzamientos avanzados",
            content: `
                <br>
                <div style='text-align:left;max-width:560px;margin:0 auto;'>
                    <p>¬°Hora de poner en pr√°ctica todo lo aprendido! Ahora combinamos sexo, color, factores y tipo de alas en un solo ejercicio. No hace falta calcular todo de memoria: piensa en bloques (sexo, color, factores, ondulaci√≥n) y analiza cada uno por separado.</p>
                    <p><b>Ejercicio:</b> Considera el siguiente cruce (en notaci√≥n de juego simplificada):</p>
                    <ul>
                        <li><b>Macho:</b> XX Vv Gg Dd OnOd</li>
                        <li><b>Hembra:</b> XY Vv dd OgOc</li>
                    </ul>
                    <p>Analiza por separado: sexo (XX/XY), color base (V/v), factor gris (G/g), factor oscuro (D/d) y ondulaci√≥n (On/Og/Oc/Od). Piensa en todas las combinaciones posibles y qu√© pollos pueden nacer.</p>
                    <div class="trait-card">
                        <p><b>Ejemplo de an√°lisis:</b> Ambos padres son Vv, as√≠ que pueden tener pollos verdes (V-) y azules (vv). El macho es Dd y la hembra dd, as√≠ que pueden salir pollos con y sin factor oscuro. La ondulaci√≥n puede combinarse de varias formas, dando alas normales, grises, claras o diluidas.</p>
                    </div>
                    <p><i>¬°Este tipo de ejercicios te prepara para planear tus propios cruces y entender la gen√©tica de tus aves!</i></p>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta:</b> ¬øQu√© combinaci√≥n de sexo esperas en la descendencia?</br>
                    <button onclick="feedback('10a', true)">Aproximadamente 50% machos y 50% hembras</button>
                    <button onclick="feedback('10a', false)">Solo machos</button>
                    <button onclick="feedback('10a', false)">Solo hembras</button>
                    <div class="feedback" id="feedback10a"></div>
                </div>
                <div class="puzzle-section">
                    <b>Pregunta bonus:</b> Si ambos son Vv, ¬øpuede haber pollos azules (vv)?</br>
                    <button onclick="feedback('10b', true)">S√≠, algunos pollos pueden ser vv</button>
                    <button onclick="feedback('10b', false)">No, todos ser√°n verdes</button>
                    <div class="feedback" id="feedback10b"></div>
                </div>
                <div class="trait-card">
                    <span class="emoji">üèÖ</span>
                    <p><b>Reto libre:</b> Intenta escribir todos los fenotipos posibles para este cruce: machos y hembras, verdes y azules, con y sin gris, con distintas ondulaciones. Es un excelente entrenamiento para convertirte en un criador experto.</p>
                </div>
            `
        }
    };

    // Estado de progreso
    let completedModules = new Set();

    // Feedback con explicaci√≥n
    const feedbackExplanations = {
                '2a': {
                    correct: '¬°Correcto! Los genes se encuentran en los cromosomas, dentro del n√∫cleo celular.',
                    wrong: 'La respuesta correcta es: en los cromosomas.'
                },
                '2b': {
                    correct: '¬°Correcto! Un alelo es una versi√≥n de un gen.',
                    wrong: 'La respuesta correcta es: una versi√≥n de un gen.'
                },
                '3b': {
                    correct: '¬°Correcto! Homocig√≥tico significa tener dos alelos iguales para un car√°cter.',
                    wrong: 'La respuesta correcta es: tener dos alelos iguales para un car√°cter.'
                },
                '11a': {
                    correct: '¬°Correcto! Las hembras solo tienen un cromosoma X, as√≠ que cualquier alelo ligado al sexo se expresa.',
                    wrong: 'La respuesta correcta es: porque solo tienen un cromosoma X.'
                },
                '12a': {
                    correct: '¬°Correcto! Al cruzar dos Spangle heterocigotos, puedes obtener pollos normales, Spangle heterocigotos y Spangle homocigotos.',
                    wrong: 'La respuesta correcta es: pollos normales, Spangle heterocigotos y Spangle homocigotos.'
                },
        '1a': {
            correct: '¬°Correcto! Un gen es el fragmento de ADN que contiene la informaci√≥n para un car√°cter.',
            wrong: 'La respuesta correcta es "Gen": es el fragmento de ADN que contiene la informaci√≥n para un car√°cter.'
        },
        '1b': {
            correct: '¬°Correcto! Cada variante de un gen se llama alelo.',
            wrong: 'La respuesta correcta es "Alelo": cada variante de un gen se llama as√≠.'
        },
        '2a': {
            correct: '¬°Correcto! El fenotipo es lo que vemos del genotipo.',
            wrong: 'La respuesta correcta es "Fenotipo": es el conjunto de manifestaciones observables del genotipo.'
        },
        '2b': {
            correct: '¬°Correcto! Homocig√≥tico significa dos alelos iguales para un car√°cter.',
            wrong: 'La respuesta correcta es: "Que tiene dos alelos iguales para ese car√°cter".'
        },
        '3a': {
            correct: '¬°Correcto! Heterocig√≥tico significa dos alelos diferentes para un car√°cter.',
            wrong: 'La respuesta correcta es "Heterocig√≥tico": tiene dos alelos diferentes para un car√°cter.'
        },
        '3b': {
            correct: '¬°Correcto! Ser diploide es tener dos copias de cada gen, una de cada progenitor.',
            wrong: 'La respuesta correcta es: "Tener dos copias de cada gen, una de cada progenitor".'
        },
        '4a': {
            correct: '¬°Correcto! Un alelo recesivo solo se manifiesta si est√° en ambas copias.',
            wrong: 'La respuesta correcta es "Recesivo": solo se manifiesta si est√° en ambas copias.'
        },
        '4b': {
            correct: 'Exacto: 50% verdes (Vv) y 50% azules (vv). El padre aporta V o v, la madre siempre v.',
            wrong: 'La respuesta correcta es 50% verdes y 50% azules: el padre aporta V o v, la madre siempre v.'
        },
        '5a': {
            correct: '¬°Correcto! Vv significa heterocig√≥tico: verde visible, portador de azul.',
            wrong: 'La respuesta correcta es: heterocig√≥tico para la l√≠nea verde, portador de azul.'
        },
        '6a': {
            correct: '¬°Correcto! En este modelo simplificado usamos XY para la hembra.',
            wrong: 'La respuesta correcta es "XY": as√≠ representamos a la hembra en el juego.'
        },
        '7a': {
            correct: '¬°Correcto! La serie verde es dominante sobre la azul.',
            wrong: 'La respuesta correcta es "Verde": la serie verde domina sobre la azul.'
        },
        '7b': {
            correct: 'Exacto: la mitad de los pollos ser√°n azul cielo (dd) y la otra mitad cobalto (Dd).',
            wrong: 'La respuesta correcta es 50% azul cielo y 50% cobalto: solo uno de los padres aporta el factor oscuro.'
        },
        '8a': {
            correct: '¬°Correcto! En este modelo, la ondulaci√≥n diluida (Od) es la m√°s recesiva.',
            wrong: 'La respuesta correcta es "Diluida (Od)": es la m√°s recesiva en este modelo.'
        },
        '9a': {
            correct: '¬°Correcto! Son caracteres ligados al sexo cuando la mutaci√≥n est√° en el cromosoma sexual.',
            wrong: 'La respuesta correcta es "Ligado al sexo": est√° en el cromosoma sexual.'
        },
        '9b': {
            correct: 'Correcto: algunas hijas pueden ser Ino; los hijos pueden ser portadores, pero no la expresan.',
            wrong: 'La respuesta correcta: algunas hijas ser√°n Ino, los hijos solo pueden ser portadores.'
        },
        '10a': {
            correct: '¬°Exacto! Esperamos aproximadamente 50% machos y 50% hembras.',
            wrong: 'La respuesta correcta: aproximadamente mitad machos y mitad hembras.'
        },
        '10b': {
            correct: 'Correcto: al ser ambos Vv, la combinaci√≥n vv es posible y produce pollos azules.',
            wrong: 'La respuesta correcta es que s√≠: algunos pollos pueden ser vv, por eso pueden salir azules.'
        }
    };

    function startModule(n) {
        const moduleContent = document.getElementById('module-content');
        if (moduleContent) moduleContent.innerHTML = '';
        moduleContent.innerHTML = `
            <h3>${modules[n].title}</h3>
            ${modules[n].content}
        `;
        for (let i = 1; i <= 10; i++) {
            const btn = document.getElementById('mod'+i);
            if (btn) {
                btn.classList.remove('active');
                btn.disabled = false;
                btn.setAttribute('aria-disabled', 'false');
            }
        }
        const btn = document.getElementById('mod'+n);
        if (btn) btn.classList.add('active');
        updateProgress();
    }

    function feedback(qid, correct) {
        const fb = document.getElementById('feedback'+qid);
        if (!fb) return;
        const exp = feedbackExplanations[qid];
        if (correct) {
            fb.innerHTML = `<span class="success">${exp?.correct || '¬°Correcto!'}</span>`;
            // Ensure only one module is counted per module, not per question
            // Find the module number by searching for the first digit in qid
            const modNumberMatch = String(qid).match(/^\d+/);
            const modNumber = modNumberMatch ? modNumberMatch[0] : null;
            if (modNumber && !completedModules.has(modNumber)) {
                completedModules.add(modNumber);
                maybeShowAchievement(modNumber);
            }
            updateProgress();
        } else {
            fb.innerHTML = `<span class="fail">${exp?.wrong || 'Incorrecto, int√©ntalo de nuevo.'}</span>`;
        }
    }

    function updateProgress() {
        const progress = document.getElementById('progress');
        if (!progress) return;
        const done = completedModules.size;
        progress.textContent = `Progreso de criador: has completado ${done} de 10 m√≥dulos (respondiendo al menos una pregunta correctamente).`;
    }

    function showAchievement(text) {
        const moduleContent = document.getElementById('module-content');
        if (!moduleContent) return;
        const div = document.createElement('div');
        div.className = 'achievement';
        div.textContent = text;
        moduleContent.appendChild(div);
    }

    function maybeShowAchievement(modNumber) {
        // Logros sencillos atados a m√≥dulos clave
        if (modNumber === '4' && !localStorage.getItem('ach_dom')) {
            localStorage.setItem('ach_dom', '1');
            showAchievement('üèÖ Logro: ¬°Dominas la dominancia! Ya entiendes la diferencia entre alelos dominantes y recesivos.');
        }
        if (modNumber === '7' && !localStorage.getItem('ach_color')) {
            localStorage.setItem('ach_color', '1');
            showAchievement('üèÖ Logro: Maestro de colores. Sabes c√≥mo los factores oscuro y gris cambian el tono de tus periquitos.');
        }
        if (modNumber === '9' && !localStorage.getItem('ach_sex')) {
            localStorage.setItem('ach_sex', '1');
            showAchievement('üèÖ Logro: Sabio de mutaciones ligadas al sexo. Puedes planear hijas Ino, Opalino o Canela con m√°s seguridad.');
        }
    }

    // Iniciar en el primer m√≥dulo
    startModule(1);

    // A√±o autom√°tico en el footer
    document.addEventListener("DOMContentLoaded", function () {
        var yearSpan = document.getElementById("year");
        if (yearSpan) {
            yearSpan.textContent = new Date().getFullYear();
        }
    });
    </script>
</body>
</html>
